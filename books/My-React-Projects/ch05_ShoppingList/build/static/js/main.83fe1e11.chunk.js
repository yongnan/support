(this["webpackJsonpch04_news-feed"]=this["webpackJsonpch04_news-feed"]||[]).push([[0],{28:function(e,n,t){e.exports=t(40)},40:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(21),i=t.n(c),o=t(13),u=t(1),l=t(2),s=t(11),d=t(4),f=t.n(d),p=t(10),m=t(9),b=t(7),h=a.a.createContext(),g={lists:[],list:{},loading:!0,error:""},v=function(e,n){switch(n.type){case"GET_LISTS_SUCCESS":return Object(b.a)({},e,{lists:n.payload,loading:!1});case"GET_LISTS_ERROR":return Object(b.a)({},e,{lists:[],loading:!1,error:n.payload});case"GET_LIST_SUCCESS":return Object(b.a)({},e,{list:n.payload,loading:!1});case"GET_LIST_ERROR":return Object(b.a)({},e,{list:{},loading:!1,error:n.payload});default:return e}};function y(e){return E.apply(this,arguments)}function E(){return(E=Object(m.a)(f.a.mark((function e(n){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:return t=e.sent,e.next=6,t.json();case 6:if(!(r=e.sent)){e.next=11;break}return e.next=10,{data:r,error:!1};case 10:return e.abrupt("return",e.sent);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",{data:!1,error:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}var x=function(e){var n=e.children,t=a.a.useReducer(v,g),r=Object(p.a)(t,2),c=r[0],i=r[1],o=function(){var e=Object(m.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("https://my-json-server.typicode.com/PacktPublishing/React-Projects/lists");case 2:(n=e.sent).data&&n.data.length?i({type:"GET_LISTS_SUCCESS",payload:n.data}):i({type:"GET_LISTS_ERROR",payload:n.error});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(m.a)(f.a.mark((function e(n){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("https://my-json-server.typicode.com/PacktPublishing/React-Projects/lists/".concat(n));case 2:(t=e.sent).data&&t.data.hasOwnProperty("id")?i({type:"GET_LIST_SUCCESS",payload:t.data}):i({type:"GET_LIST_ERROR",payload:t.error});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return a.a.createElement(h.Provider,{value:Object(b.a)({},c,{getListsRequest:o,getListRequest:u})},n)},j=t(26),O=a.a.createContext(),w={items:[],loading:!0,error:""},S=function(e,n){switch(n.type){case"GET_ITEMS_SUCCESS":return Object(b.a)({},e,{items:n.payload,loading:!1});case"GET_ITEMS_ERROR":return Object(b.a)({},e,{items:[],loading:!1,error:n.payload});case"ADD_ITEM_SUCCESS":return Object(b.a)({},e,{items:[].concat(Object(j.a)(e.items),[n.payload]),loading:!1});case"ADD_ITEM_ERROR":return Object(b.a)({},e,{loading:!1,error:"Something went wrong..."});default:return e}};function k(e){return R.apply(this,arguments)}function R(){return(R=Object(m.a)(f.a.mark((function e(n){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:return t=e.sent,e.next=6,t.json();case 6:if(!(r=e.sent)){e.next=11;break}return e.next=10,{data:r,error:!1};case 10:return e.abrupt("return",e.sent);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",{data:!1,error:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function _(e,n){return C.apply(this,arguments)}function C(){return(C=Object(m.a)(f.a.mark((function e(n,t){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n,{method:"POST",body:JSON.stringify(t)});case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(a=e.sent)){e.next=11;break}return e.next=10,{data:a,error:!1};case 10:return e.abrupt("return",e.sent);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",{data:!1,error:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}var T=function(e){var n=e.children,t=a.a.useReducer(S,w),r=Object(p.a)(t,2),c=r[0],i=r[1],o=function(){var e=Object(m.a)(f.a.mark((function e(n){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("https://my-json-server.typicode.com/PacktPublishing/React-Projects/lists/".concat(n,"/items"));case 2:(t=e.sent).data&&t.data.length?i({type:"GET_ITEMS_SUCCESS",payload:t.data}):i({type:"GET_ITEMS_ERROR",payload:t.error});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=Object(m.a)(f.a.mark((function e(n){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("https://my-json-server.typicode.com/PacktPublishing/React-Projects/lists",n);case 2:(t=e.sent).data&&t.data.hasOwnProperty("id")?i({type:"ADD_ITEM_SUCCESS",payload:n}):i({type:"ADD_ITEM_ERROR"});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return a.a.createElement(O.Provider,{value:Object(b.a)({},c,{getItemsRequest:o,addItemRequest:u})},n)},I=function(e){var n=e.children;return a.a.createElement(x,null,a.a.createElement(T,null,n))};function P(){var e=Object(u.a)(["\n  pointer-events: none;\n"]);return P=function(){return e},e}function L(){var e=Object(u.a)(["\n  background-color: orange;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(10px + 2vmin);\n  color: white;\n"]);return L=function(){return e},e}var G=l.b.div(L()),U=l.b.h1(P()),A=function(){return a.a.createElement(G,null,a.a.createElement(U,null,"Personal Shopping List"))};function q(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: orange;\n  color: white;\n  padding: 10px;\n  line-height: 2;\n  border-radius: 5px;\n  border: 0;\n  font-size: inherit;\n  cursor: pointer;\n"]);return q=function(){return e},e}var M=l.b.button(q());function B(){var e=Object(u.a)(["\n  margin: 10px 5%;\n"]);return B=function(){return e},e}function D(){var e=Object(u.a)(["\n  text-align: center;\n  flex-basis: 60%;\n\n  &:first-child {\n    margin-left: 20%;\n  }\n\n  &:last-child {\n    margin-right: 20%;\n  }\n"]);return D=function(){return e},e}function F(){var e=Object(u.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  background: navajowhite;\n"]);return F=function(){return e},e}var W=l.b.div(F()),z=l.b.h2(D()),N=Object(l.b)(M)(B()),J=function(e){var n=e.goBack,t=e.title,r=e.openForm,c=void 0!==r&&r;return a.a.createElement(W,null,n&&a.a.createElement(N,{onClick:n},"< Go Back"),a.a.createElement(z,null,t),c&&a.a.createElement(N,{onClick:c},"+ Add Item"))};function Q(){var e=Object(u.a)(["\n  width: 100%;\n  text-align: center;\n"]);return Q=function(){return e},e}function $(){var e=Object(u.a)(["\n  flex-basis: 80%;\n"]);return $=function(){return e},e}function H(){var e=Object(u.a)(["\n  display: flex;\n  text-align: left;\n  align-items: center;\n  padding: 1%;\n  background: lightGray;\n  border-radius: 5px;\n  padding: 10px;\n  margin-bottom: 2%;\n  color: black;\n  text-decoration: none;\n"]);return H=function(){return e},e}function Y(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  margin: 5%;\n"]);return Y=function(){return e},e}var K=l.b.div(Y()),V=Object(l.b)(o.b)(H()),X=l.b.h3($()),Z=l.b.span(Q()),ee=function(e){var n=e.history,t=a.a.useContext(h),r=t.lists,c=t.loading,i=t.error,o=t.getListsRequest;return a.a.useLayoutEffect((function(){r.length||o()}),[o,r]),c||i?a.a.createElement(Z,null,c?"Loading...":i):a.a.createElement(a.a.Fragment,null,n&&a.a.createElement(J,{title:"Your Lists"}),a.a.createElement(K,null,r&&r.map((function(e){return a.a.createElement(V,{key:e.id,to:"list/".concat(e.id)},a.a.createElement(X,null,e.title))}))))};function ne(){var e=Object(u.a)(["\n  flex-basis: 15%;\n  font-weight: bold;\n  text-align: right;\n"]);return ne=function(){return e},e}function te(){var e=Object(u.a)(["\n  flex-basis: 70%;\n"]);return te=function(){return e},e}function re(){var e=Object(u.a)(["\n  display: flex;\n  text-align: left;\n  align-items: center;\n  padding: 1%;\n  background: lightGray;\n  border-radius: 5px;\n  padding: 10px;\n  margin-bottom: 2%;\n  text-decoration: none;\n"]);return re=function(){return e},e}var ae=l.b.div(re()),ce=l.b.h3(te()),ie=l.b.span(ne()),oe=function(e){var n=e.data;return a.a.createElement(ae,null,a.a.createElement(ce,null,n.title),a.a.createElement(ie,null,"Quantity: ".concat(n.quantity)),a.a.createElement(ie,null,"$ ".concat(n.price)))};function ue(){var e=Object(u.a)(["\n  width: 100%;\n  text-align: center;\n"]);return ue=function(){return e},e}function le(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  margin: 2% 5%;\n"]);return le=function(){return e},e}var se=l.b.div(le()),de=l.b.span(ue()),fe=function(e){var n=e.match,t=e.history,r=a.a.useContext(h),c=r.list,i=r.getListRequest,o=a.a.useContext(O),u=o.loading,l=o.error,s=o.items,d=o.getItemsRequest;return a.a.useEffect((function(){c.id||i(n.params.id),d(n.params.id)}),[]),u||l?a.a.createElement(de,null,u?"Loading...":l):a.a.createElement(a.a.Fragment,null,t&&c&&a.a.createElement(J,{goBack:function(){return t.goBack()},openForm:function(){return t.push("".concat(n.url,"/new"))},title:c.title}),a.a.createElement(se,null,s&&s.map((function(e){return a.a.createElement(oe,{key:e.id,data:e})}))))};function pe(){var e=Object(u.a)(["\n  flex-basis: 60%;\n  border: 0;\n  font-size: inherit;\n  border-radius: 5px;\n  padding: 10px;\n  border: 1px solid lightGrey;\n"]);return pe=function(){return e},e}function me(){var e=Object(u.a)(["\n  display: block;\n  font-weight: bold;\n  padding: 10px 0;\n"]);return me=function(){return e},e}function be(){var e=Object(u.a)(["\n  display: flex;\n  text-align: left;\n  flex-direction: column;\n  margin-bottom: 2%;\n"]);return be=function(){return e},e}var he=l.b.div(be()),ge=l.b.label(me()),ve=l.b.input(pe()),ye=function(e){var n=e.id,t=e.label,r=e.type,c=void 0===r?"text":r,i=e.placeholder,o=void 0===i?"":i,u=e.value,l=e.handleOnChange;return a.a.createElement(he,null,a.a.createElement(ge,{htmlFor:n},t),a.a.createElement(ve,{type:c,name:n,id:n,placeholder:o,value:u,onChange:function(e){return l(e.target.value)}}))};function Ee(){var e=Object(u.a)(["\n  background: blue;\n  margin: 2% 0;\n"]);return Ee=function(){return e},e}function xe(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  margin: 2% 5%;\n"]);return xe=function(){return e},e}var je=l.b.div(xe()),Oe=Object(l.b)(M)(Ee()),we=function(e){var n=e.match,t=e.history,r=a.a.useContext(O).addItemRequest,c=a.a.useState(""),i=Object(p.a)(c,2),o=i[0],u=i[1],l=a.a.useState(""),s=Object(p.a)(l,2),d=s[0],f=s[1],m=a.a.useState(""),b=Object(p.a)(m,2),h=b[0],g=b[1];return a.a.createElement(a.a.Fragment,null,t&&a.a.createElement(J,{goBack:function(){return t.goBack()},title:"Add Item"}),a.a.createElement(je,null,a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),r({title:o,quantity:d,price:h,id:Math.floor(100*Math.random()),listId:parseInt(n.params.id)}),t.goBack()}},a.a.createElement(ye,{id:"title",label:"Title",placeholder:"Insert title",value:o,handleOnChange:u}),a.a.createElement(ye,{id:"quantity",label:"Quantity",type:"number",placeholder:"0",value:d,handleOnChange:f}),a.a.createElement(ye,{id:"price",label:"Price",type:"number",placeholder:"0.00",value:h,handleOnChange:g}),a.a.createElement(Oe,null,"Add Item"))))};function Se(){var e=Object(u.a)(["\n  text-align: center;\n"]);return Se=function(){return e},e}function ke(){var e=Object(u.a)(['\n  body {\n    margin: 0;\n    padding: 0;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n      "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n']);return ke=function(){return e},e}var Re=Object(l.a)(ke()),_e=l.b.div(Se()),Ce=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Re,null),a.a.createElement(_e,null,a.a.createElement(A,null),a.a.createElement(I,null,a.a.createElement(s.c,null,a.a.createElement(s.a,{exact:!0,path:"/",component:ee}),a.a.createElement(s.a,{path:"/list/:id/new",component:we}),a.a.createElement(s.a,{path:"/list/:id",component:fe})))))},Te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ie(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(a.a.createElement(o.a,null,a.a.createElement(Ce,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");Te?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ie(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ie(n,e)}))}}()}},[[28,1,2]]]);
//# sourceMappingURL=main.83fe1e11.chunk.js.map